<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.future.my.common.dao.ICodeDAO">
	<select id="getCodeList" parameterType="String" resultType="com.future.my.common.vo.CodeVO">
		SELECT comm_cd
		     , comm_nm
		     , comm_parent
		FROM comm_code
		<choose>
			<when test="commParent==null">
				WHERE comm_parent IS NULL
			</when>
			<otherwise>
				WHERE comm_parent = #{commParent}
			</otherwise>
		</choose>		
	</select>
	<!-- resultMap 정의 -->
	<resultMap type="com.future.my.common.vo.QuestionVO" id="QuestionMap">
		<id property="qId" column="q_id" />
		<result property="qContent" column="q_content" />
		<collection property="options" ofType="com.future.my.common.vo.OptionVO">	
			<id property="oId" column="o_id"/>
			<result property="oContent" column="o_content" />
		</collection>
	</resultMap>
	
	<select id="getSurvey" resultMap="QuestionMap">
		SELECT a.q_id
		     , a.q_content
		     , b.o_id
		     , b.o_content
		FROM questions a 
		   , q_options b
		WHERE a.q_id = b.q_id
		ORDER BY a.q_id, b.o_id
	</select>
	
	<select id="getStoreList" resultType="com.future.my.common.vo.StoreVO">
        SELECT c_id, title, lat, lng
        FROM chicken_store
        ORDER BY c_id
    </select>
	
	
</mapper>
